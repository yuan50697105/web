<!DOCTYPE html><#assign ctx=request.contextPath><#import "header.html" as head><#import "buttom.html" as foot><html><head>    <base href="${ctx}/">    <meta charset="utf-8"/>    <title>登录</title>    <link rel="stylesheet" href="${ctx}/css/bootstrap.css"/>    <link rel="stylesheet" href="${ctx}/css/bootstrap-responsive.css">    <link rel="stylesheet" href="${ctx}/css/style.css"/>    <link rel="stylesheet" href="${ctx}/css/common.css"/>    <link rel="stylesheet" href="${ctx}/css/">    <link rel="stylesheet" href="${ctx}/css/login.css"/>    <script src="${ctx}/js/jquery-1.11.0.js"></script>    <script src="${ctx}/js/style.js"></script>    <script src="${ctx}/js/bootstrap.js"></script>    <script src="${ctx}/js/artDialog-6.0.2/dist/dialog-min.js"></script>    <link rel="stylesheet" href="${ctx}/js/artDialog-6.0.2/css/ui-dialog.css"><#--<script type="text/javascript" src="${ctx}/js/jquery-1.11.0.js"></script>--><#-- <script type="text/javascript" src="${ctx}/js/bootstrap.js"></script>--><#--<script type="text/javascript" src="${ctx}/js/jquery.cookie.js"></script>--><#-- <script type="text/javascript" src="js/artDialog-6.0.2/dist/dialog-min.js"></script>--><#--<script type="text/javascript" src="${ctx}/js/style.js"></script>-->    <style>        .content .con_right form input[type="button"][id='loginBtn'] {            width: 400px;            line-height: 44px;            background: #d89b3c;            border: 1px solid #cccccc;            font-family: "微软雅黑";            font-size: 18px;            color: #fff;            margin: 10px 0 0 20px;        }    </style>    <script type="text/javascript">        $(function () {            $("#vimg").mouseover(function () {                $(this).css("cursor", "pointer");            }).click(function () {                $("#vimg").attr("src", "${ctx}/getAuthCode?random=" + Math.random());            });            $("strong[id$='_tip']").hide();            /** 为表单绑定onsubmit提交事件 */            /** 绑定回车键绑定事件，当用户按了回车键，就提交表单 */            $(document).keydown(function (event) {                if (event.keyCode === 13) { // 等于13代表按了回车键                    // 触发表单提交按钮的点击事件                    $("#login").trigger("click");                }            });            $("input[id='loginBtn']").click(function () {                /** 隐藏所有的提示信息 *///                $("strong[id$='_tip']").hide();                var isSubmit = true;                /** 做表单输入校验 */                var userId = $("#userid");                var pwd = $("#password");                var code = $("#code");                if ($.trim(userId.val()).length == 0) {                    $("#userId_tip").html("* 用户名不能空！").show();                    isSubmit = false;                    userId.focus(); // 调用文本框获取焦点方法                } else if (!/^\w{5,20}$/.test($.trim(userId.val()))) {                    $("#userId_tip").html("* 用户名格式不正确！").show();                    isSubmit = false;                    userId.focus(); // 调用文本框获取焦点方法                } else if ($.trim(pwd.val()).length == 0) {                    $("#word_tip").html("* 密码不能为空！").show();                    isSubmit = false;                    pwd.focus(); // 调用文本框获取焦点方法                } else if (!/^\w{6,20}$/.test($.trim(pwd.val()))) {                    $("#word_tip").html("* 密码格式不正确！").show();                    isSubmit = false;                    pwd.focus(); // 调用文本框获取焦点方法                } else if ($.trim(code.val()).length == 0) {                    $("#code_tip").html("* 验证码不能为空！").show();                    isSubmit = false;                    code.focus(); // 调用文本框获取焦点方法                } else if (!/^\w{4}$/.test($.trim(code.val()))) {                    $("#code_tip").html("* 验证码格式不正确！").show();                    isSubmit = false;                    code.focus(); // 调用文本框获取焦点方法                }                /** 判断表单是否通过校验 */                if (isSubmit) {                    console.log(isSubmit)                    var params = $("form[id='customerLoginForm']").serialize();                    params = {userid: userId.val(), password: pwd.val(), code: code.val()}                    console.log(params);                    var url = "${ctx}/customer/login";                    $.post(url, params, function (data) {                        console.log(data.status + "   " + data.tip);                        if (data.status == 1) {                        <#if customer_order_url??>                            window.location = "${customer_order_url}";                        <#else >                            window.location = "${ctx}/index";                        </#if>                        } else {                            var d = dialog({                                title: '温馨提示',                                content: '<font size=6 color=red>' + data.tip + '</font>'                            });                            d.show();                            setTimeout(function () {                                d.close().remove();                            }, 2000);                            //刷新验证码                            $("#vimg").trigger("click");                        }                    }, "json");                }            });            //实现跳出框架界面的js代码            if (top.location != self.location) {                top.location = self.location;            }        });    </script></head><body><div class="header"><@head.header_top/>    <div class="header_con">        <div class="container">            <a href="${ctx}/index" class="header_cl">                <img src="${ctx}/img/logo.png"/>            </a>            <h2>在线登录</h2>        </div>    </div></div><div class="content">    <div class="container">        <div class="con_left">            <a href="###"><img src="${ctx}/img/login_pic.jpg"/></a>        </div>        <div class="con_right">            <form id="customerLoginForm">                <h3>在线登录<a href="${ctx}/toRegistor">免费注册</a></h3>                <input type="text" placeholder="用户名/手机号" name="userid" id="userid"/>                <strong id="userid_tip">请输入您注册的手机号码</strong>                <input type="password" placeholder="密码" name="password" id="password"/>                <strong id="password_tip">请输入您的密码</strong>                <div class="code_text">                    <input type="text" class="val" placeholder="验证码" name="code" id="code"/>                    <img id="vimg" src="${ctx}/getAuthCode">                <#--<p>1234</p><b></b>-->                    <strong id="code_tip">请输入正确的验证码</strong>                </div>                <p>                    <label>                        <input type="checkbox" id="loginInput"/>记住密码                    </label>                    <a href="###">忘记密码</a>                </p>                <input type="button" id="loginBtn" value="登录" onclick="">            <#--<button id="loginBtn">登录</button>-->                <span></span>            </form>            <script>                $(document).ready(function () {                });            </script>        </div>    </div></div><@foot.footer/></body></html>